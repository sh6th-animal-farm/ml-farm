<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.animalfarm.mlf.domain.carbon.CarbonRepository">

  	<!-- 전체 조회 -->
  	<select id="selectAll"
    	    resultType="com.animalfarm.mlf.domain.carbon.dto.CarbonListDTO">
	    SELECT
	      cp_id               AS cpId,
	      project_id          AS projectId,
	      cp_type             AS category,
	      cp_price            AS cpPrice,
	      cp_amount           AS cpAmount,
	      product_certificate AS productCertificate,
	      vintage_year        AS vintageYear,
	      cp_detail           AS cpDetail,
	      cp_title
	    FROM carbon_products
	    ORDER BY cp_id DESC
  	</select>

	<!-- 조건 조회 -->
	<select id="selectByCondition"
          parameterType="string"
          resultType="com.animalfarm.mlf.domain.carbon.dto.CarbonListDTO">

	    SELECT
	      cp_id               AS cpId,
	      project_id          AS projectId,
	      cp_title            AS title,
	      cp_type             AS category,
	      cp_price            AS cpPrice,
	      cp_amount           AS cpAmount,
	      product_certificate AS productCertificate,
	      vintage_year        AS vintageYear,
	      cp_detail            AS cpDetail,
	      cp_title
	    FROM carbon_products
	
	    <where>
	      <if test="category != null and category != ''">
	        AND cp_type = #{category}
	      </if>
	    </where>
	
	    ORDER BY cp_id DESC
	</select>
</mapper>
